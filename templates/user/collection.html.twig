{% extends 'base.html.twig' %}

{% block title %}Hello UserPageController!
{% endblock %}

{% block body %}
	<div class="body-content">
		<div class="container">

			<div class="page-title">
				<h1 class="page-title">Votre Collection de jeux</h1>
			</div>

			<div class="new-game-template">
				{% if games is defined %}
					{% for game in games %}
						<div class="game-carte">
							<div class="carte-image">
								{% if game.cover is defined %}
									<a href="{{ path('game', {id: game.id}) }}"><img src="{{ game.cover.url }}" alt="{{ game.name }} cover"></a>
								{% else %}
									<img src="{{ asset('build/images/placeholder.jpg') }}" alt="Cover placeholder">
								{% endif %}
								{% if game.category != "jeu de base" %}
									<small class="carte-category">{{ game.category }}</small>
								{% endif %}
							</div>
							<div class="carte_body">
								<div class="carte_body-title">
									<a href="{{ path('game', {id: game.id}) }}">
										<h2>{{ game.name|length > 30 ? game.name|slice(0, 30) ~ '...' : game.name }}</h2>
									</a>
								</div>
								<div class="carte_body-platforms carte-infos">
									{% if game.platforms is defined %}
										{% for platform in game.platforms|slice(0, 4) %}
											<small class="carte-platforms badge">{{ platform.abbreviation|default(platform.name) }}</small>
										{% endfor %}
										{% if game.platforms|length > 4 %}
											<small class="carte-platforms badge">+{{ game.platforms|length - 4 }}</small>
										{% endif %}
									{% endif %}
								</div>

								{# <div class="carte_body-genres carte-infos">
																{% if game.genres is defined %}
																	{% for genre in game.genres %}
																		<small class="carte-genres badge">{{ genre.name }}</small>
																	{% endfor %}
																{% endif %}
															</div>
								
															<div class="carte_body-themes carte-infos">
																{% if game.themes is defined %}
																	{% for theme in game.themes %}
																		<small class=" carte-themes badge">{{ theme.name }}</small>
																	{% endfor %}
																{% endif %}
															</div>
								
															<div class="carte_body-modes carte-infos">
																{% if game.game_modes is defined %}
																	{% for mode in game.game_modes %}
																		<small class="carte-modes badge">{{ mode.name }}</small>
																	{% endfor %}
																{% endif %}
															</div> #}

								<div class="carte_body-footer">
									<div class="carte_footer-release">
										{% if game.first_release_date is defined %}
											<p>
												<span class="badge bg-secondary">{{ game.first_release_date|date('d/m/Y') }}</span>
											</p>
										{% endif %}
									</div>
									<div class="carte_footer-rating">
										{% if game.rating is defined %}
											<p>
												{% if game.rating|round >= 75 %}
													<span class="score score-green">{{ game.rating|round }}%</span>
												{% elseif game.rating|round >= 50 %}
													<span class="score score-blue">{{ game.rating|round }}%</span>
												{% elseif game.rating|round >= 25 %}
													<span class="score score-yellow">{{ game.rating|round }}%</span>
												{% elseif game.rating|round >= 0 %}
													<span class="score score-red">{{ game.rating|round }}%</span>
												{% else %}
													<span class="score score-null">N/A</span>
												{% endif %}
											</p>
										{% else %}
											<p>
												<span class="score score-null">N/A</span>
											</p>
										{% endif %}
									</div>
								</div>
							</div>
						</div>
					{% endfor %}
				{% else %}
					<p>Vous n'avez pas encore de jeux dans votre collection</p>
				{% endif %}

			</div>
		</div>
	</div>
{% endblock %}
